spring.application.name=gestor-clientes

# --- DataSource (Cloud SQL via Private IP) ---
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA ---
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=America/Santiago

# --- Hikari (pool optimizado para Cloud Run) ---
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
# Opcionales si quieres mantenerlos:
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.data-source-properties.sslmode=prefer

# --- Server configuration ---
server.port=8080
server.servlet.context-path=/

# --- Logging (ajústalo si hace ruido) ---
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=INFO
logging.level.org.springframework.jdbc=INFO
logging.level.org.springframework.orm.jpa=INFO
logging.level.com.gestor=INFO
logging.level.org.postgresql=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# --- Email ---
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=consultas.puntos@gmail.com
spring.mail.password=mqttrondsjsvvehw
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# --- JWT ---
jwt.secret=0679d6233e1c7f67fa80c3ad5c785b23fbdea95da498ffb77061ee633c5a9e5f40bf8722c96796c4701e1db8d465b9b9ce2056e32df6cc5d3eb2f876289d7851713eb64ce5777d97d5309beaf9bdf866ecac3daede7bc2fc548bac917ecdee922d1271d4f7daffb552df5ca2a3b13e98a4db6cfea1e17ab8dc5fc8aeb4cc28dca60bbb0fa8f880c113642e718645c2ec438d2964339b525ae3d3ea93d5281af1b21089dac0f4837005bf85aac9e054dc4328eb8c0b2ea76f48ff12b9b1f8d1c1fc634fc07f541c44d37cda52c0a349ffa4e1bd1f6c3befd8c0dddb2b5b8662dec2e2f198ace9c9fbf0c59610842bc991e7c64be0ec5fcc8cb819a60d2634733b
jwt.expiration=86400000
jwt.issuer=AUTH-backend

# --- CORS ---
cors.allowed-origins=https://prestige-club-2025.web.app,https://prestige-club-2025.firebaseapp.com,https://betpoints-puntos.web.app
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# --- Actuator ---
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true

# --- Archivos ---
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# --- Caché ---
spring.cache.type=simple
